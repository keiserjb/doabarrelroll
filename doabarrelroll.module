<?php

/**
 * @file
 * Adds the Barrel Roll feature to search forms.
 */

/**
 * Implements hook_form_alter().
 */
function doabarrelroll_form_alter(&$form, &$form_state, $form_id) {
  if (in_array($form_id, array('search_form', 'search_block_form'))) {
    $form['#attached']['css'][] = drupal_get_path('module', 'doabarrelroll') . '/doabarrelroll.css';
    $form['#attached']['js'][] = drupal_get_path('module', 'doabarrelroll') . '/doabarrelroll.js';
    $form['#attached']['js'][] = array(
      'data' => array(
        'doabarrelroll' => array('style' => \Drupal::config('doabarrelroll.settings')->get('style')),
      ),
      'type' => 'setting',
    );
  }
}

/**
 * Implements hook_menu().
 */
function doabarrelroll_menu() {
  return array(
    'admin/config/user-interface/doabarrelroll' => array(
      'title' => 'Do a Barrel Roll',
      'description' => 'Configure the Barrel Roll styles.',
      'route_name' => 'doabarrelroll.settings',
    ),
  );
}

/**
 * Implements hook_permission().
 */
function doabarrelroll_permission() {
  return array(
    'configure barrel roll' => array(
      'title' => t('Configure the barrel roll options'),
    ),
  );
}
